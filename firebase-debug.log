[debug] [2024-12-02T19:40:40.396Z] ----------------------------------------------------------------------
[debug] [2024-12-02T19:40:40.398Z] Command:       /usr/local/nodejs/bin/node /usr/local/nodejs/bin/firebase deploy --only functions --debug
[debug] [2024-12-02T19:40:40.399Z] CLI Version:   13.27.0
[debug] [2024-12-02T19:40:40.399Z] Platform:      linux
[debug] [2024-12-02T19:40:40.399Z] Node Version:  v20.18.0
[debug] [2024-12-02T19:40:40.399Z] Time:          Mon Dec 02 2024 13:40:40 GMT-0600 (Central Standard Time)
[debug] [2024-12-02T19:40:40.399Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-12-02T19:40:40.473Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:40:40.475Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:40:40.476Z] [iam] checking project smartshield-2936f for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-12-02T19:40:40.477Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:40.477Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:40.479Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:40:40.479Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:40.479Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:40:40.731Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:40:40.731Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:40:40.731Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:40.732Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:40.732Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-12-02T19:40:40.732Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-12-02T19:40:41.141Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2024-12-02T19:40:41.141Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2024-12-02T19:40:41.142Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smartshield-2936f'...
[info] 
[info] i  deploying functions 
[debug] [2024-12-02T19:40:41.146Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.146Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.146Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:40:41.251Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:40:41.251Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:41.253Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.253Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.253Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.254Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:41.254Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.254Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:41.255Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.255Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.255Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [none]
[debug] [2024-12-02T19:40:41.255Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:41.257Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [none]
[debug] [2024-12-02T19:40:41.257Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:41.260Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [none]
[debug] [2024-12-02T19:40:41.261Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:41.263Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [none]
[debug] [2024-12-02T19:40:41.263Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:41.708Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com 200
[debug] [2024-12-02T19:40:41.708Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-12-02T19:40:41.710Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com 200
[debug] [2024-12-02T19:40:41.710Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-12-02T19:40:41.712Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com 200
[debug] [2024-12-02T19:40:41.712Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-12-02T19:40:41.713Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com 200
[debug] [2024-12-02T19:40:41.713Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-12-02T19:40:41.713Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.714Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:41.714Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig [none]
[debug] [2024-12-02T19:40:42.114Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig 200
[debug] [2024-12-02T19:40:42.114Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig {"projectId":"smartshield-2936f","databaseURL":"https://smartshield-2936f-default-rtdb.firebaseio.com","storageBucket":"smartshield-2936f.firebasestorage.app"}
[debug] [2024-12-02T19:40:42.114Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.115Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.115Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs [none]
[debug] [2024-12-02T19:40:42.470Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs 200
[debug] [2024-12-02T19:40:42.470Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs {"configs":[{"name":"projects/smartshield-2936f/configs/email"}]}
[debug] [2024-12-02T19:40:42.471Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.471Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.471Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables [none]
[debug] [2024-12-02T19:40:42.591Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables 200
[debug] [2024-12-02T19:40:42.591Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables {"variables":[{"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z"},{"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z"}]}
[debug] [2024-12-02T19:40:42.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:42.593Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user [none]
[debug] [2024-12-02T19:40:42.594Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass [none]
[debug] [2024-12-02T19:40:42.711Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user 200
[debug] [2024-12-02T19:40:42.711Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user {"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z","text":"jaroldgeordanno@gmail.com"}
[debug] [2024-12-02T19:40:42.803Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass 200
[debug] [2024-12-02T19:40:42.803Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass {"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z","text":"Jarytwist2003008"}
[debug] [2024-12-02T19:40:42.804Z] Validating nodejs source
[debug] [2024-12-02T19:40:43.579Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.9.16"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-12-02T19:40:43.579Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-12-02T19:40:43.580Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-12-02T19:40:43.585Z] Found firebase-functions binary at '/home/jarytwist/Dev/smartshield/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8657

[debug] [2024-12-02T19:40:43.835Z] Got response from /__/functions.yaml {"endpoints":{"monitorDeviceEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/events/{eventId}"},"retry":false},"entryPoint":"monitorDeviceEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:47.862Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:47.862Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:47.863Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [none]
[debug] [2024-12-02T19:40:47.863Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:48.257Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com 200
[debug] [2024-12-02T19:40:48.257Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-12-02T19:40:48.258Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:40:48.258Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:40:48.258Z] [iam] checking project smartshield-2936f for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-12-02T19:40:48.258Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.258Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.258Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:40:48.258Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:48.258Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:40:48.453Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:40:48.454Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:40:48.454Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.454Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.455Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances pageSize=100&pageToken=
[debug] [2024-12-02T19:40:48.784Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances 200
[debug] [2024-12-02T19:40:48.784Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /home/jarytwist/Dev/smartshield/functions (61.95 KB) for uploading 
[debug] [2024-12-02T19:40:48.827Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.827Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:48.827Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions [none]
[debug] [2024-12-02T19:40:49.451Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:40:49.451Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:40:49.452Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:49.452Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:49.452Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-12-02T19:40:49.891Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:40:49.891Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:40:49.892Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:49.892Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:49.892Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) [none]
[debug] [2024-12-02T19:40:50.119Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) 200
[debug] [2024-12-02T19:40:50.119Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) {"name":"projects/smartshield-2936f/databases/(default)","uid":"80452cd1-a600-4c61-ad49-dff8c1e6bf31","createTime":"2024-11-28T03:52:37.511699Z","updateTime":"2024-11-28T03:52:37.511699Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-12-02T18:40:50.107213Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"INnpt87riYoDMPmD3KjX/4kD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:50.120Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.120Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:50.120Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.121Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:50.121Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.121Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-12-02T19:40:50.121Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.121Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.121Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [none]
[debug] [2024-12-02T19:40:50.121Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:50.122Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [none]
[debug] [2024-12-02T19:40:50.122Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:50.124Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [none]
[debug] [2024-12-02T19:40:50.125Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:50.127Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [none]
[debug] [2024-12-02T19:40:50.127Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:40:50.461Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com 200
[debug] [2024-12-02T19:40:50.461Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-12-02T19:40:50.462Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com 200
[debug] [2024-12-02T19:40:50.462Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-12-02T19:40:50.635Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com 200
[debug] [2024-12-02T19:40:50.635Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-12-02T19:40:50.642Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com 200
[debug] [2024-12-02T19:40:50.642Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2024-12-02T19:40:50.643Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.643Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-12-02T19:40:50.643Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.644Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:50.644Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:40:50.644Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:40:50.895Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:40:50.896Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105126537426549179795"}}
[debug] [2024-12-02T19:40:51.124Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:40:51.124Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"112176926320788103320"}}
[debug] [2024-12-02T19:40:51.126Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.126Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.126Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy [none]
[debug] [2024-12-02T19:40:51.432Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy 200
[debug] [2024-12-02T19:40:51.432Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy {"version":1,"etag":"BwYoTq/n5mc=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:404015253336@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-404015253336@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com","serviceAccount:404015253336@cloudservices.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-404015253336@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:jaroldgeordanno@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-404015253336@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-12-02T19:40:51.432Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.432Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.432Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:setIamPolicy [none]
[debug] [2024-12-02T19:40:51.433Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:setIamPolicy {"policy":{"version":1,"etag":"BwYoTq/n5mc=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:404015253336@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-404015253336@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com","serviceAccount:404015253336@cloudservices.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-404015253336@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:jaroldgeordanno@gmail.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-404015253336@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/run.invoker","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2024-12-02T19:40:51.980Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:setIamPolicy 200
[debug] [2024-12-02T19:40:51.980Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:setIamPolicy {"version":1,"etag":"BwYoTrnqIdk=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:404015253336@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-404015253336@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com","serviceAccount:404015253336@cloudservices.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-404015253336@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:jaroldgeordanno@gmail.com"]},{"role":"roles/run.invoker","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-404015253336@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-12-02T19:40:51.980Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.981Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:51.981Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:40:52.074Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:40:52.075Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[debug] [2024-12-02T19:40:52.076Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:52.076Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:52.076Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo [none]
[debug] [2024-12-02T19:40:52.557Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo 200
[debug] [2024-12-02T19:40:52.557Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo {"name":"projects/smartshield-2936f/billingInfo","projectId":"smartshield-2936f","billingAccountName":"billingAccounts/014CC7-094C4D-7E54A9","billingEnabled":true}
[debug] [2024-12-02T19:40:52.559Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:52.559Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:40:52.559Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-12-02T19:40:54.458Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl 404
[debug] [2024-12-02T19:40:54.458Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl {"error":{"code":404,"message":"Could not authenticate 'service-404015253336@gcf-admin-robot.iam.gserviceaccount.com': Not found; Gaia id not found for email service-404015253336@gcf-admin-robot.iam.gserviceaccount.com","status":"NOT_FOUND"}}
[info] 

There was an issue deploying your functions. Verify that your project has a Google App Engine instance setup at https://console.cloud.google.com/appengine and try again. If this issue persists, please contact support.
[warn] ⚠  functions: Upload Error: Request to https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl had HTTP Error: 404, Could not authenticate 'service-404015253336@gcf-admin-robot.iam.gserviceaccount.com': Not found; Gaia id not found for email service-404015253336@gcf-admin-robot.iam.gserviceaccount.com 
[error] 
[error] Error: Request to https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl had HTTP Error: 404, Could not authenticate 'service-404015253336@gcf-admin-robot.iam.gserviceaccount.com': Not found; Gaia id not found for email service-404015253336@gcf-admin-robot.iam.gserviceaccount.com
[debug] [2024-12-02T19:40:54.648Z] Error Context: {
  "body": {
    "error": {
      "code": 404,
      "message": "Could not authenticate 'service-404015253336@gcf-admin-robot.iam.gserviceaccount.com': Not found; Gaia id not found for email service-404015253336@gcf-admin-robot.iam.gserviceaccount.com",
      "status": "NOT_FOUND"
    }
  },
  "response": {
    "statusCode": 404
  }
}
[debug] [2024-12-02T19:43:03.743Z] ----------------------------------------------------------------------
[debug] [2024-12-02T19:43:03.745Z] Command:       /usr/local/nodejs/bin/node /usr/local/nodejs/bin/firebase deploy --only functions
[debug] [2024-12-02T19:43:03.745Z] CLI Version:   13.27.0
[debug] [2024-12-02T19:43:03.745Z] Platform:      linux
[debug] [2024-12-02T19:43:03.745Z] Node Version:  v20.18.0
[debug] [2024-12-02T19:43:03.746Z] Time:          Mon Dec 02 2024 13:43:03 GMT-0600 (Central Standard Time)
[debug] [2024-12-02T19:43:03.746Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-12-02T19:43:03.806Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:43:03.806Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:43:03.806Z] [iam] checking project smartshield-2936f for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-12-02T19:43:03.807Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:03.807Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:03.808Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:43:03.809Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:03.809Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:43:04.148Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:43:04.148Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:43:04.149Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.149Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.150Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-12-02T19:43:04.150Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-12-02T19:43:04.622Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2024-12-02T19:43:04.622Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2024-12-02T19:43:04.624Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smartshield-2936f'...
[info] 
[info] i  deploying functions 
[debug] [2024-12-02T19:43:04.635Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.635Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.636Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:43:04.747Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:43:04.747Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:04.752Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.753Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.753Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.753Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:04.755Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.755Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:04.755Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.756Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:04.756Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [none]
[debug] [2024-12-02T19:43:04.756Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:04.760Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [none]
[debug] [2024-12-02T19:43:04.760Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:04.765Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [none]
[debug] [2024-12-02T19:43:04.766Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:04.768Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [none]
[debug] [2024-12-02T19:43:04.769Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:05.119Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com 200
[debug] [2024-12-02T19:43:05.119Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-12-02T19:43:05.126Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com 200
[debug] [2024-12-02T19:43:05.127Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-12-02T19:43:05.135Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com 200
[debug] [2024-12-02T19:43:05.135Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-12-02T19:43:05.356Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com 200
[debug] [2024-12-02T19:43:05.357Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-12-02T19:43:05.358Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:05.359Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:05.359Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig [none]
[debug] [2024-12-02T19:43:05.635Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig 200
[debug] [2024-12-02T19:43:05.636Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig {"projectId":"smartshield-2936f","databaseURL":"https://smartshield-2936f-default-rtdb.firebaseio.com","storageBucket":"smartshield-2936f.firebasestorage.app"}
[debug] [2024-12-02T19:43:05.638Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:05.638Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:05.639Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs [none]
[debug] [2024-12-02T19:43:06.158Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs 200
[debug] [2024-12-02T19:43:06.159Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs {"configs":[{"name":"projects/smartshield-2936f/configs/email"}]}
[debug] [2024-12-02T19:43:06.160Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.160Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.160Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables [none]
[debug] [2024-12-02T19:43:06.268Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables 200
[debug] [2024-12-02T19:43:06.268Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables {"variables":[{"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z"},{"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z"}]}
[debug] [2024-12-02T19:43:06.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:06.269Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user [none]
[debug] [2024-12-02T19:43:06.270Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass [none]
[debug] [2024-12-02T19:43:06.414Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user 200
[debug] [2024-12-02T19:43:06.415Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user {"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z","text":"jaroldgeordanno@gmail.com"}
[debug] [2024-12-02T19:43:06.679Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass 200
[debug] [2024-12-02T19:43:06.679Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass {"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z","text":"Jarytwist2003008"}
[debug] [2024-12-02T19:43:06.684Z] Validating nodejs source
[debug] [2024-12-02T19:43:07.381Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.9.16"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-12-02T19:43:07.382Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-12-02T19:43:07.383Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-12-02T19:43:07.387Z] Found firebase-functions binary at '/home/jarytwist/Dev/smartshield/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8272

[debug] [2024-12-02T19:43:07.620Z] Got response from /__/functions.yaml {"endpoints":{"monitorDeviceEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/events/{eventId}"},"retry":false},"entryPoint":"monitorDeviceEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:11.662Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:11.663Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:11.663Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [none]
[debug] [2024-12-02T19:43:11.663Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:12.031Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com 200
[debug] [2024-12-02T19:43:12.032Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-12-02T19:43:12.033Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:43:12.033Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:43:12.034Z] [iam] checking project smartshield-2936f for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-12-02T19:43:12.034Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.034Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.035Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:43:12.035Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:12.036Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:43:12.277Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:43:12.277Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:43:12.279Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.279Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.281Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances pageSize=100&pageToken=
[debug] [2024-12-02T19:43:12.568Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances 200
[debug] [2024-12-02T19:43:12.568Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /home/jarytwist/Dev/smartshield/functions (61.95 KB) for uploading 
[debug] [2024-12-02T19:43:12.636Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.636Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:12.636Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions [none]
[debug] [2024-12-02T19:43:13.332Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:43:13.333Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:43:13.334Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:13.334Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:13.335Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-12-02T19:43:13.873Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:43:13.873Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:43:13.877Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:13.877Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:13.877Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) [none]
[debug] [2024-12-02T19:43:14.146Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) 200
[debug] [2024-12-02T19:43:14.146Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) {"name":"projects/smartshield-2936f/databases/(default)","uid":"80452cd1-a600-4c61-ad49-dff8c1e6bf31","createTime":"2024-11-28T03:52:37.511699Z","updateTime":"2024-11-28T03:52:37.511699Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-12-02T18:43:14.131258Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IIKujpPsiYoDMPmD3KjX/4kD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:14.151Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.152Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:14.152Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.152Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:14.153Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.153Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-12-02T19:43:14.154Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.154Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.155Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [none]
[debug] [2024-12-02T19:43:14.155Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:14.156Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [none]
[debug] [2024-12-02T19:43:14.156Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:14.163Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [none]
[debug] [2024-12-02T19:43:14.164Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:14.169Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [none]
[debug] [2024-12-02T19:43:14.169Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:43:14.323Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com 200
[debug] [2024-12-02T19:43:14.323Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-12-02T19:43:14.456Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com 200
[debug] [2024-12-02T19:43:14.456Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-12-02T19:43:14.459Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com 200
[debug] [2024-12-02T19:43:14.459Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2024-12-02T19:43:14.461Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com 200
[debug] [2024-12-02T19:43:14.462Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2024-12-02T19:43:14.463Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.463Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-12-02T19:43:14.464Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.465Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.465Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:43:14.467Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:43:14.778Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:43:14.779Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105126537426549179795"}}
[debug] [2024-12-02T19:43:14.910Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:43:14.911Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"112176926320788103320"}}
[debug] [2024-12-02T19:43:14.917Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.918Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:14.918Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy [none]
[debug] [2024-12-02T19:43:15.026Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy 200
[debug] [2024-12-02T19:43:15.027Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy {"version":1,"etag":"BwYoTr18/8U=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:404015253336@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-404015253336@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-404015253336@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com","serviceAccount:404015253336@cloudservices.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-404015253336@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:jaroldgeordanno@gmail.com"]},{"role":"roles/run.invoker","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-404015253336@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-12-02T19:43:15.029Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.029Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.029Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:43:15.133Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:43:15.133Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[debug] [2024-12-02T19:43:15.137Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.137Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.137Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo [none]
[debug] [2024-12-02T19:43:15.416Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo 200
[debug] [2024-12-02T19:43:15.416Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo {"name":"projects/smartshield-2936f/billingInfo","projectId":"smartshield-2936f","billingAccountName":"billingAccounts/014CC7-094C4D-7E54A9","billingEnabled":true}
[debug] [2024-12-02T19:43:15.421Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.421Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:15.421Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-12-02T19:43:16.592Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-12-02T19:43:16.592Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip?GoogleAccessId=service-404015253336@gcf-admin-robot.iam.gserviceaccount.com&Expires=1733170396&Signature=Lu9kPgR1I6%2F5RjaEHs0sbO8AA3ylvECLw5x5Engt4qmCekLI%2FmWj14KT3TbUMUJ1LXJ3k8O26kV%2BMg5d3DwS0F7wwTDH0%2FoWOOYw3nvZRksUn7DlknBaHZmiszrrgKuCQtTqq8zWqpTWKP5ucGTqfAeXrzjfc5GOaC3Y2fvMxCw9Un98MMK%2FGMBxdg%2F0jUNYzDTWb57siyKhtAxffVC7JFQ%2F4f%2Bt%2FycXCDDZKzZWV2j3C6JKPuDeiwVKvOyqPfQhbxtQFkl5CCbFmum6LqlUo94tTVsGlY0zSwbtQNFDUf16QL3UWzsjnX5E20VAuM1rqRiKNL3zBA1nYmBl6mVvXw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip"}}
[debug] [2024-12-02T19:43:16.593Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip GoogleAccessId=service-404015253336%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1733170396&Signature=Lu9kPgR1I6%2F5RjaEHs0sbO8AA3ylvECLw5x5Engt4qmCekLI%2FmWj14KT3TbUMUJ1LXJ3k8O26kV%2BMg5d3DwS0F7wwTDH0%2FoWOOYw3nvZRksUn7DlknBaHZmiszrrgKuCQtTqq8zWqpTWKP5ucGTqfAeXrzjfc5GOaC3Y2fvMxCw9Un98MMK%2FGMBxdg%2F0jUNYzDTWb57siyKhtAxffVC7JFQ%2F4f%2Bt%2FycXCDDZKzZWV2j3C6JKPuDeiwVKvOyqPfQhbxtQFkl5CCbFmum6LqlUo94tTVsGlY0zSwbtQNFDUf16QL3UWzsjnX5E20VAuM1rqRiKNL3zBA1nYmBl6mVvXw%3D%3D
[debug] [2024-12-02T19:43:16.593Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip [stream]
[debug] [2024-12-02T19:43:16.958Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip 200
[debug] [2024-12-02T19:43:16.959Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 18 (2nd Gen) function monitorDeviceEvents(us-central1)... 
[debug] [2024-12-02T19:43:16.974Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:16.975Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:16.975Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions functionId=monitorDeviceEvents
[debug] [2024-12-02T19:43:16.976Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions {"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"5266e9a9-bf3e-498d-a576-2b087cbbbcb0.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-12-02T19:43:33.645Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions 400
[debug] [2024-12-02T19:43:33.645Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions {"error":{"code":400,"message":"Validation failed for trigger projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-782974: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.","status":"FAILED_PRECONDITION"}}
[warn] ⚠  functions: Request to https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions?functionId=monitorDeviceEvents had HTTP Error: 400, Validation failed for trigger projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-782974: Invalid resource state for "": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role. 
[warn] ⚠  functions: Since this is your first time using 2nd gen functions, we need a little bit longer to finish setting everything up. Retry the deployment in a few minutes. 
[warn] ⚠  functions:  failed to create function projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents 
[error] Failed to create function projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents
[debug] [2024-12-02T19:43:33.670Z] Total Function Deployment time: 16685
[debug] [2024-12-02T19:43:33.670Z] 1 Functions Deployed
[debug] [2024-12-02T19:43:33.671Z] 1 Functions Errored
[debug] [2024-12-02T19:43:33.671Z] 0 Function Deployments Aborted
[debug] [2024-12-02T19:43:33.671Z] Average Function Deployment time: 16683
[info] 
[info] Functions deploy had errors with the following functions:
	monitorDeviceEvents(us-central1)
[info] i  functions: cleaning up build files... 
[debug] [2024-12-02T19:43:33.888Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:33.888Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:33.889Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:33.889Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:33.889Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events [none]
[debug] [2024-12-02T19:43:33.890Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:43:34.238Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events 404
[debug] [2024-12-02T19:43:34.238Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events {"error":{"code":404,"message":"Package \"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-12-02T19:43:34.381Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:43:34.381Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:43:34.382Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T19:43:34.385Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:34.385Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:34.386Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:43:34.643Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:43:34.644Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:43:34.644Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T19:43:34.746Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:34.746Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:43:34.746Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:43:34.867Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:43:34.867Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:43:34.868Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/smartshield-2936f/us/gcf 
[debug] [2024-12-02T19:43:34.870Z] Functions deploy failed.
[debug] [2024-12-02T19:43:34.871Z] {
  "endpoint": {
    "id": "monitorDeviceEvents",
    "project": "smartshield-2936f",
    "region": "us-central1",
    "entryPoint": "monitorDeviceEvents",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{userId}/events/{eventId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "smartshield-2936f",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "9e9b5b60c1af308de43269a36bbf41b8e1846d78"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents"
    },
    "exit": 1,
    "message": "Failed to create function projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Validation failed for trigger projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-782974: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions?functionId=monitorDeviceEvents had HTTP Error: 400, Validation failed for trigger projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-782974: Invalid resource state for \"\": Permission denied while using the Eventarc Service Agent. If you recently started to use Eventarc, it may take a few minutes before all necessary permissions are propagated to the Service Agent. Otherwise, verify that it has Eventarc Service Agent role.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2024-12-02T19:43:34.935Z] Error: Failed to create function monitorDeviceEvents in region us-central1
    at /usr/local/nodejs/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:294:27
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.createV2Function (/usr/local/nodejs/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:278:30)
    at async Fabricator.createEndpoint (/usr/local/nodejs/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:137:13)
    at async handle (/usr/local/nodejs/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-12-02T19:44:27.761Z] ----------------------------------------------------------------------
[debug] [2024-12-02T19:44:27.763Z] Command:       /usr/local/nodejs/bin/node /usr/local/nodejs/bin/firebase deploy --only functions --debug
[debug] [2024-12-02T19:44:27.764Z] CLI Version:   13.27.0
[debug] [2024-12-02T19:44:27.764Z] Platform:      linux
[debug] [2024-12-02T19:44:27.764Z] Node Version:  v20.18.0
[debug] [2024-12-02T19:44:27.764Z] Time:          Mon Dec 02 2024 13:44:27 GMT-0600 (Central Standard Time)
[debug] [2024-12-02T19:44:27.764Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-12-02T19:44:27.841Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:44:27.842Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:44:27.842Z] [iam] checking project smartshield-2936f for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-12-02T19:44:27.843Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:27.844Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:27.845Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:44:27.845Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:27.845Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:44:28.210Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:44:28.211Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T19:44:28.211Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.211Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.211Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-12-02T19:44:28.212Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-12-02T19:44:28.465Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2024-12-02T19:44:28.465Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2024-12-02T19:44:28.466Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smartshield-2936f'...
[info] 
[info] i  deploying functions 
[debug] [2024-12-02T19:44:28.468Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.468Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.469Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:44:28.569Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:44:28.569Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:28.570Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.570Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.570Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.570Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:28.571Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.571Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:28.571Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.571Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:28.572Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [none]
[debug] [2024-12-02T19:44:28.572Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:28.573Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [none]
[debug] [2024-12-02T19:44:28.573Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:28.574Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [none]
[debug] [2024-12-02T19:44:28.574Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:28.576Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [none]
[debug] [2024-12-02T19:44:28.576Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:28.914Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com 200
[debug] [2024-12-02T19:44:28.915Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-12-02T19:44:28.917Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com 200
[debug] [2024-12-02T19:44:28.917Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-12-02T19:44:28.919Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com 200
[debug] [2024-12-02T19:44:28.919Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-12-02T19:44:29.138Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com 200
[debug] [2024-12-02T19:44:29.138Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-12-02T19:44:29.139Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.139Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.139Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig [none]
[debug] [2024-12-02T19:44:29.503Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig 200
[debug] [2024-12-02T19:44:29.504Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig {"projectId":"smartshield-2936f","databaseURL":"https://smartshield-2936f-default-rtdb.firebaseio.com","storageBucket":"smartshield-2936f.firebasestorage.app"}
[debug] [2024-12-02T19:44:29.504Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.505Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.505Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs [none]
[debug] [2024-12-02T19:44:29.780Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs 200
[debug] [2024-12-02T19:44:29.781Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs {"configs":[{"name":"projects/smartshield-2936f/configs/email"}]}
[debug] [2024-12-02T19:44:29.783Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.783Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.784Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables [none]
[debug] [2024-12-02T19:44:29.961Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables 200
[debug] [2024-12-02T19:44:29.961Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables {"variables":[{"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z"},{"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z"}]}
[debug] [2024-12-02T19:44:29.963Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.963Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.964Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.964Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:29.965Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass [none]
[debug] [2024-12-02T19:44:29.968Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user [none]
[debug] [2024-12-02T19:44:30.144Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass 200
[debug] [2024-12-02T19:44:30.145Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass {"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z","text":"Jarytwist2003008"}
[debug] [2024-12-02T19:44:30.200Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user 200
[debug] [2024-12-02T19:44:30.200Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user {"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z","text":"jaroldgeordanno@gmail.com"}
[debug] [2024-12-02T19:44:30.203Z] Validating nodejs source
[debug] [2024-12-02T19:44:30.956Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.9.16"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-12-02T19:44:30.956Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-12-02T19:44:30.957Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-12-02T19:44:30.962Z] Found firebase-functions binary at '/home/jarytwist/Dev/smartshield/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8730

[debug] [2024-12-02T19:44:31.180Z] Got response from /__/functions.yaml {"endpoints":{"monitorDeviceEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/events/{eventId}"},"retry":false},"entryPoint":"monitorDeviceEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:35.214Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:35.214Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:35.215Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [none]
[debug] [2024-12-02T19:44:35.215Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:35.589Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com 200
[debug] [2024-12-02T19:44:35.590Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-12-02T19:44:35.590Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T19:44:35.591Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T19:44:35.591Z] [iam] checking project smartshield-2936f for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-12-02T19:44:35.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:35.592Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:35.593Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T19:44:35.593Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:35.593Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:44:36.016Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T19:44:36.016Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T19:44:36.018Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:36.018Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:36.020Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances pageSize=100&pageToken=
[debug] [2024-12-02T19:44:36.410Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances 200
[debug] [2024-12-02T19:44:36.411Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /home/jarytwist/Dev/smartshield/functions (61.95 KB) for uploading 
[debug] [2024-12-02T19:44:36.473Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:36.473Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:36.473Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions [none]
[debug] [2024-12-02T19:44:37.332Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:44:37.333Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:44:37.334Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:37.334Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:37.335Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-12-02T19:44:37.744Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T19:44:37.744Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T19:44:37.745Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:37.745Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:37.745Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) [none]
[debug] [2024-12-02T19:44:38.003Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) 200
[debug] [2024-12-02T19:44:38.003Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) {"name":"projects/smartshield-2936f/databases/(default)","uid":"80452cd1-a600-4c61-ad49-dff8c1e6bf31","createTime":"2024-11-28T03:52:37.511699Z","updateTime":"2024-11-28T03:52:37.511699Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-12-02T18:44:37.986519Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IKa8jLvsiYoDMPmD3KjX/4kD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:38.008Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.008Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:38.009Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.009Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:38.010Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.011Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-12-02T19:44:38.012Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.012Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.013Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [none]
[debug] [2024-12-02T19:44:38.014Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:38.016Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [none]
[debug] [2024-12-02T19:44:38.016Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:38.023Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [none]
[debug] [2024-12-02T19:44:38.024Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:38.027Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [none]
[debug] [2024-12-02T19:44:38.028Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T19:44:38.210Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com 200
[debug] [2024-12-02T19:44:38.211Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-12-02T19:44:38.306Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com 200
[debug] [2024-12-02T19:44:38.306Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-12-02T19:44:38.310Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com 200
[debug] [2024-12-02T19:44:38.311Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-12-02T19:44:38.318Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com 200
[debug] [2024-12-02T19:44:38.318Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2024-12-02T19:44:38.321Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.321Z] Checked if tokens are valid: true, expires at: 1733171877575
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-12-02T19:44:38.322Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.322Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.323Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:44:38.324Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T19:44:38.515Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:44:38.516Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"112176926320788103320"}}
[debug] [2024-12-02T19:44:38.601Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T19:44:38.601Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105126537426549179795"}}
[debug] [2024-12-02T19:44:38.604Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.604Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.604Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy [none]
[debug] [2024-12-02T19:44:38.730Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy 200
[debug] [2024-12-02T19:44:38.731Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/404015253336:getIamPolicy {"version":1,"etag":"BwYoTsKzpAo=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:404015253336@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-404015253336@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-404015253336@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com","serviceAccount:404015253336@cloudservices.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-404015253336@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-404015253336@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-hv0q9@smartshield-2936f.iam.gserviceaccount.com","serviceAccount:service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:jaroldgeordanno@gmail.com"]},{"role":"roles/run.invoker","members":["serviceAccount:404015253336-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-404015253336@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2024-12-02T19:44:38.733Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.734Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.734Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T19:44:38.817Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T19:44:38.818Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[debug] [2024-12-02T19:44:38.819Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.819Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:38.819Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo [none]
[debug] [2024-12-02T19:44:39.052Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo 200
[debug] [2024-12-02T19:44:39.052Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo {"name":"projects/smartshield-2936f/billingInfo","projectId":"smartshield-2936f","billingAccountName":"billingAccounts/014CC7-094C4D-7E54A9","billingEnabled":true}
[debug] [2024-12-02T19:44:39.054Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:39.054Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:39.054Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-12-02T19:44:39.255Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-12-02T19:44:39.255Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/68fdf0f8-7c40-4414-b124-eaf569a73009.zip?GoogleAccessId=service-404015253336@gcf-admin-robot.iam.gserviceaccount.com&Expires=1733170479&Signature=NzFWhJuol29ToPf1irLHpX1wJ%2BuEumDWbfcCcvCGzNP4u4abkqwUvVyvrwrwlGWXL4534aOQjbfkG64hU5HD01hxVeWt0AkA%2BtY3ZP4pro2Q9Bna0cFkkCoIlK8cReLbyDlLAbD8m0nfC90OTXsGvdmF%2Fdt9O68ZEZymoKS%2BaHMpGGxyOyXRQ%2BqlN2vNNwl34yv8NuHxf4bEXfFD11cwgDdsNzv66SNOzDnfTSEJMCCWsBNbRc1mGRnsJapnCXTv9P6V0wiZQznRTHovWTRG%2FE42JMDvsyR8dNLwqCwAJpR8jwT0LgRMIGCCxjMIp%2F9hjqKSkAxDev1q9giM1CXhxg%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"68fdf0f8-7c40-4414-b124-eaf569a73009.zip"}}
[debug] [2024-12-02T19:44:39.257Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/68fdf0f8-7c40-4414-b124-eaf569a73009.zip GoogleAccessId=service-404015253336%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1733170479&Signature=NzFWhJuol29ToPf1irLHpX1wJ%2BuEumDWbfcCcvCGzNP4u4abkqwUvVyvrwrwlGWXL4534aOQjbfkG64hU5HD01hxVeWt0AkA%2BtY3ZP4pro2Q9Bna0cFkkCoIlK8cReLbyDlLAbD8m0nfC90OTXsGvdmF%2Fdt9O68ZEZymoKS%2BaHMpGGxyOyXRQ%2BqlN2vNNwl34yv8NuHxf4bEXfFD11cwgDdsNzv66SNOzDnfTSEJMCCWsBNbRc1mGRnsJapnCXTv9P6V0wiZQznRTHovWTRG%2FE42JMDvsyR8dNLwqCwAJpR8jwT0LgRMIGCCxjMIp%2F9hjqKSkAxDev1q9giM1CXhxg%3D%3D
[debug] [2024-12-02T19:44:39.257Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/68fdf0f8-7c40-4414-b124-eaf569a73009.zip [stream]
[debug] [2024-12-02T19:44:39.858Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/68fdf0f8-7c40-4414-b124-eaf569a73009.zip 200
[debug] [2024-12-02T19:44:39.859Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/68fdf0f8-7c40-4414-b124-eaf569a73009.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 18 (2nd Gen) function monitorDeviceEvents(us-central1)... 
[debug] [2024-12-02T19:44:39.878Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:39.878Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:39.879Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions functionId=monitorDeviceEvents
[debug] [2024-12-02T19:44:39.880Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions {"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"68fdf0f8-7c40-4414-b124-eaf569a73009.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-12-02T19:44:41.121Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions 200
[debug] [2024-12-02T19:44:41.122Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T19:44:41.125Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:41.125Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:41.126Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:41.259Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:41.259Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T19:44:41.761Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:44:41.761Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:41.762Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:41.762Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:41.907Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:41.907Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-12-02T19:44:42.912Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:44:42.913Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:42.913Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:42.914Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:43.046Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:43.046Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-12-02T19:44:45.047Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:44:45.048Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:45.048Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:45.049Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:45.189Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:45.190Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-12-02T19:44:49.195Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:44:49.196Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:49.196Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:49.197Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:49.290Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:49.290Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2024-12-02T19:44:57.306Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:44:57.308Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:57.309Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:44:57.310Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:44:57.560Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:44:57.561Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:07.587Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:07.588Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:07.589Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:07.589Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:07.858Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:07.859Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:17.885Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:17.886Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:17.886Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:17.887Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:18.353Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:18.354Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:28.380Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:28.381Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:28.382Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:28.382Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:28.744Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:28.747Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:38.772Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:38.773Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:38.773Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:38.774Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:39.241Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:39.242Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:49.268Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:49.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:49.269Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:49.269Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:49.525Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:49.526Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:49.527Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:45:59.553Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:45:59.554Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:59.555Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:45:59.555Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:45:59.880Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:45:59.881Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:45:59.881Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:46:09.908Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:46:09.908Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:09.908Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:09.909Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:46:10.153Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:46:10.153Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:46:10.154Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:46:20.180Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:46:20.180Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:20.180Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:20.180Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:46:20.452Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:46:20.453Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:46:20.454Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:46:30.480Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:46:30.480Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:30.481Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:30.481Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:46:30.791Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:46:30.791Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:46:30.792Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:46:40.817Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:46:40.818Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:40.818Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:40.819Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:46:41.071Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:46:41.072Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","message":"Creating Eventarc trigger","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:46:41.073Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:46:51.098Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:46:51.099Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:51.099Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:46:51.100Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:46:51.314Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:46:51.315Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","message":"Creating Eventarc trigger","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":false}
[debug] [2024-12-02T19:46:51.316Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T19:47:01.342Z] [create-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T19:47:01.343Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.343Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.344Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 [none]
[debug] [2024-12-02T19:47:01.616Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 200
[debug] [2024-12-02T19:47:01.617Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733168680020-6284ec78229bf-d6453ac6-12ea5093","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T19:44:41.052784926Z","endTime":"2024-12-02T19:46:51.605529678Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/9924862c-08a1-4146-bfc0-2dedc24a7483?project=404015253336"},{"name":"SERVICE","message":"Creating Cloud Run service","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f"},{"name":"TRIGGER","message":"Creating Eventarc trigger","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"CREATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483"},"done":true,"response":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"build":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-02T19:44:41.046516345Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents","createTime":"2024-12-02T19:44:41.046516345Z"}}
[debug] [2024-12-02T19:47:01.618Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy85OTI0ODYyYy0wOGExLTQxNDYtYmZjMC0yZGVkYzI0YTc0ODMSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAjlnLi6BhDwiuGxAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[info] ✔  functions[monitorDeviceEvents(us-central1)] Successful create operation. 
[debug] [2024-12-02T19:47:01.638Z] Total Function Deployment time: 141753
[debug] [2024-12-02T19:47:01.639Z] 1 Functions Deployed
[debug] [2024-12-02T19:47:01.639Z] 0 Functions Errored
[debug] [2024-12-02T19:47:01.640Z] 0 Function Deployments Aborted
[debug] [2024-12-02T19:47:01.640Z] Average Function Deployment time: 141750
[info] i  functions: cleaning up build files... 
[debug] [2024-12-02T19:47:01.841Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.841Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.842Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.842Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:01.842Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events [none]
[debug] [2024-12-02T19:47:01.843Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:47:02.169Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events 404
[debug] [2024-12-02T19:47:02.170Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events {"error":{"code":404,"message":"Package \"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-12-02T19:47:02.177Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:47:02.178Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:47:02.179Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T19:47:02.183Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:02.184Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:02.185Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:47:02.313Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:47:02.314Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:47:02.314Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T19:47:02.416Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:02.416Z] Checked if tokens are valid: true, expires at: 1733171877575
[debug] [2024-12-02T19:47:02.416Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T19:47:02.537Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T19:47:02.537Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T19:47:02.538Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/smartshield-2936f/us/gcf 
[info] 
[info] ✔  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/smartshield-2936f/overview
[debug] [2024-12-02T21:17:12.605Z] ----------------------------------------------------------------------
[debug] [2024-12-02T21:17:12.607Z] Command:       /usr/local/nodejs/bin/node /usr/local/nodejs/bin/firebase deploy --only functions --debug
[debug] [2024-12-02T21:17:12.607Z] CLI Version:   13.27.0
[debug] [2024-12-02T21:17:12.607Z] Platform:      linux
[debug] [2024-12-02T21:17:12.608Z] Node Version:  v20.18.0
[debug] [2024-12-02T21:17:12.608Z] Time:          Mon Dec 02 2024 15:17:12 GMT-0600 (Central Standard Time)
[debug] [2024-12-02T21:17:12.608Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-12-02T21:17:12.667Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T21:17:12.669Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T21:17:12.669Z] [iam] checking project smartshield-2936f for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-12-02T21:17:12.670Z] Checked if tokens are valid: false, expires at: 1733171877575
[debug] [2024-12-02T21:17:12.670Z] Checked if tokens are valid: false, expires at: 1733171877575
[debug] [2024-12-02T21:17:12.670Z] > refreshing access token with scopes: []
[debug] [2024-12-02T21:17:12.672Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-12-02T21:17:12.672Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-12-02T21:17:12.966Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-12-02T21:17:12.967Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-12-02T21:17:12.977Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T21:17:12.978Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:12.978Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T21:17:13.290Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T21:17:13.291Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T21:17:13.293Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.293Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.294Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-12-02T21:17:13.294Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-12-02T21:17:13.600Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2024-12-02T21:17:13.600Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2024-12-02T21:17:13.602Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smartshield-2936f'...
[info] 
[info] i  deploying functions 
[debug] [2024-12-02T21:17:13.613Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.613Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.614Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T21:17:13.723Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T21:17:13.724Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:13.728Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.729Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.730Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.730Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:13.732Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.732Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:13.733Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.733Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:13.734Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [none]
[debug] [2024-12-02T21:17:13.734Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:13.741Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [none]
[debug] [2024-12-02T21:17:13.742Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:13.746Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [none]
[debug] [2024-12-02T21:17:13.747Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:13.749Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [none]
[debug] [2024-12-02T21:17:13.750Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:14.099Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com 200
[debug] [2024-12-02T21:17:14.099Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-12-02T21:17:14.134Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com 200
[debug] [2024-12-02T21:17:14.134Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-12-02T21:17:14.159Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com 200
[debug] [2024-12-02T21:17:14.160Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-12-02T21:17:14.168Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com 200
[debug] [2024-12-02T21:17:14.168Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-12-02T21:17:14.169Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.170Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.170Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig [none]
[debug] [2024-12-02T21:17:14.529Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig 200
[debug] [2024-12-02T21:17:14.530Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig {"projectId":"smartshield-2936f","databaseURL":"https://smartshield-2936f-default-rtdb.firebaseio.com","storageBucket":"smartshield-2936f.firebasestorage.app"}
[debug] [2024-12-02T21:17:14.532Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.532Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.533Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs [none]
[debug] [2024-12-02T21:17:14.846Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs 200
[debug] [2024-12-02T21:17:14.847Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs {"configs":[{"name":"projects/smartshield-2936f/configs/email"}]}
[debug] [2024-12-02T21:17:14.848Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.849Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.849Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables [none]
[debug] [2024-12-02T21:17:14.981Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables 200
[debug] [2024-12-02T21:17:14.982Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables {"variables":[{"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z"},{"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z"}]}
[debug] [2024-12-02T21:17:14.983Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.984Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.984Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.985Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:14.985Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass [none]
[debug] [2024-12-02T21:17:14.987Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user [none]
[debug] [2024-12-02T21:17:15.117Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass 200
[debug] [2024-12-02T21:17:15.117Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass {"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z","text":"Jarytwist2003008"}
[debug] [2024-12-02T21:17:15.197Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user 200
[debug] [2024-12-02T21:17:15.198Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user {"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z","text":"jaroldgeordanno@gmail.com"}
[debug] [2024-12-02T21:17:15.203Z] Validating nodejs source
[debug] [2024-12-02T21:17:16.316Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.9.16"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-12-02T21:17:16.317Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-12-02T21:17:16.318Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-12-02T21:17:16.325Z] Found firebase-functions binary at '/home/jarytwist/Dev/smartshield/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8701

[debug] [2024-12-02T21:17:16.569Z] Got response from /__/functions.yaml {"endpoints":{"monitorDeviceEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/events/{eventId}"},"retry":false},"entryPoint":"monitorDeviceEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:20.611Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:20.611Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:20.611Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [none]
[debug] [2024-12-02T21:17:20.612Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:20.885Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com 200
[debug] [2024-12-02T21:17:20.886Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-12-02T21:17:20.887Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T21:17:20.887Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T21:17:20.888Z] [iam] checking project smartshield-2936f for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-12-02T21:17:20.888Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:20.888Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:20.889Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T21:17:20.889Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:20.889Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T21:17:21.123Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T21:17:21.124Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T21:17:21.125Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:21.126Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:21.128Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances pageSize=100&pageToken=
[debug] [2024-12-02T21:17:21.595Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances 200
[debug] [2024-12-02T21:17:21.595Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /home/jarytwist/Dev/smartshield/functions (61.95 KB) for uploading 
[debug] [2024-12-02T21:17:21.660Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:21.660Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:21.660Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions [none]
[debug] [2024-12-02T21:17:22.412Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T21:17:22.413Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T21:17:22.413Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:22.414Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:22.414Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-12-02T21:17:22.924Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T21:17:22.925Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions {"functions":[{"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"build":"projects/404015253336/locations/us-central1/builds/9924862c-08a1-4146-bfc0-2dedc24a7483","runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-02T19:46:51.822444971Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9e9b5b60c1af308de43269a36bbf41b8e1846d78"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents","createTime":"2024-12-02T19:44:41.046516345Z"}]}
[debug] [2024-12-02T21:17:22.932Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:22.932Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:22.933Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) [none]
[debug] [2024-12-02T21:17:23.387Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) 200
[debug] [2024-12-02T21:17:23.387Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) {"name":"projects/smartshield-2936f/databases/(default)","uid":"80452cd1-a600-4c61-ad49-dff8c1e6bf31","createTime":"2024-11-28T03:52:37.511699Z","updateTime":"2024-11-28T03:52:37.511699Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-12-02T20:17:23.374307Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IInl8JiBiooDMPmD3KjX/4kD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:23.390Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.390Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:23.390Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.390Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:23.391Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.391Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-12-02T21:17:23.391Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.391Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.391Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [none]
[debug] [2024-12-02T21:17:23.391Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:23.392Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [none]
[debug] [2024-12-02T21:17:23.392Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:23.395Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [none]
[debug] [2024-12-02T21:17:23.395Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:23.398Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [none]
[debug] [2024-12-02T21:17:23.398Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:17:23.538Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com 200
[debug] [2024-12-02T21:17:23.538Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-12-02T21:17:23.677Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com 200
[debug] [2024-12-02T21:17:23.677Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-12-02T21:17:23.680Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com 200
[debug] [2024-12-02T21:17:23.681Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-12-02T21:17:23.695Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com 200
[debug] [2024-12-02T21:17:23.695Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2024-12-02T21:17:23.697Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.697Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-12-02T21:17:23.697Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.698Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:23.698Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T21:17:23.699Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T21:17:23.935Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T21:17:23.935Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"112176926320788103320"}}
[debug] [2024-12-02T21:17:24.154Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T21:17:24.154Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105126537426549179795"}}
[debug] [2024-12-02T21:17:24.161Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.162Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.162Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T21:17:24.262Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T21:17:24.262Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[debug] [2024-12-02T21:17:24.263Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.263Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.264Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo [none]
[debug] [2024-12-02T21:17:24.753Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo 200
[debug] [2024-12-02T21:17:24.753Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo {"name":"projects/smartshield-2936f/billingInfo","projectId":"smartshield-2936f","billingAccountName":"billingAccounts/014CC7-094C4D-7E54A9","billingEnabled":true}
[debug] [2024-12-02T21:17:24.755Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.755Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:24.756Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-12-02T21:17:24.979Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-12-02T21:17:24.980Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip?GoogleAccessId=service-404015253336@gcf-admin-robot.iam.gserviceaccount.com&Expires=1733176044&Signature=MuSL1hU3O0MqBQl17pimJlrRZhSC5CRxxYxzWn4M2EjXRzsotyhFbeCymG%2FicFYUszVfIQkksMrAcXXOBg9upy4JBa2OtDfZ1HQ%2FamTUvhbdiDsBGO9Ak0Mdopvis4J76tMM2LTEp48twjB9tx0HUP2TEj%2FWf%2BCD30w6CukU%2FjMMNmyW7OVKVxjjE2B%2FOIDnbMqGYHogJkdT7G83p7WuBMTIXxte8AtGROhhrRzIUyQEiWm1AjncPWrNxCqVQ5GYMvi63N%2FzqgudbM%2FG%2F2jRhWuEAzKdccuK6X7damUGan8gCdzk71SZxVZuS62jCp69kQ25o2XiNug6kPEv1tMheQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip"}}
[debug] [2024-12-02T21:17:24.984Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip GoogleAccessId=service-404015253336%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1733176044&Signature=MuSL1hU3O0MqBQl17pimJlrRZhSC5CRxxYxzWn4M2EjXRzsotyhFbeCymG%2FicFYUszVfIQkksMrAcXXOBg9upy4JBa2OtDfZ1HQ%2FamTUvhbdiDsBGO9Ak0Mdopvis4J76tMM2LTEp48twjB9tx0HUP2TEj%2FWf%2BCD30w6CukU%2FjMMNmyW7OVKVxjjE2B%2FOIDnbMqGYHogJkdT7G83p7WuBMTIXxte8AtGROhhrRzIUyQEiWm1AjncPWrNxCqVQ5GYMvi63N%2FzqgudbM%2FG%2F2jRhWuEAzKdccuK6X7damUGan8gCdzk71SZxVZuS62jCp69kQ25o2XiNug6kPEv1tMheQ%3D%3D
[debug] [2024-12-02T21:17:24.985Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip [stream]
[debug] [2024-12-02T21:17:25.376Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip 200
[debug] [2024-12-02T21:17:25.377Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function monitorDeviceEvents(us-central1)... 
[debug] [2024-12-02T21:17:25.395Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:25.396Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:25.397Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2024-12-02T21:17:25.397Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents {"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"d10ce7da-7f46-4a8d-a58e-1ba5f05d80a6.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-12-02T21:17:26.522Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents 200
[debug] [2024-12-02T21:17:26.523Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T21:17:26.526Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:26.526Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:26.527Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:26.627Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:26.627Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T21:17:27.130Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:27.131Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:27.131Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:27.131Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:27.232Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:27.232Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2024-12-02T21:17:28.238Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:28.238Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:28.238Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:28.239Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:28.384Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:28.385Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:17:30.385Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:30.386Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:30.386Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:30.386Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:30.513Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:30.514Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:17:34.519Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:34.520Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:34.521Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:34.521Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:34.655Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:34.656Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:17:42.671Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:42.672Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:42.673Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:42.673Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:42.989Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:42.989Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:17:53.014Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:17:53.014Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:53.014Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:17:53.014Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:17:53.277Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:17:53.278Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:18:03.303Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:18:03.304Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:03.304Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:03.306Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:18:03.522Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:18:03.522Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8zYjQ3ZDg5MC0xZWI3LTQ3MTYtYmU0ZS0xNDJhZTg0MjBhY2YSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiIyLi6BhDIgYTlAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":false}
[debug] [2024-12-02T21:18:03.523Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8zYjQ3ZDg5MC0xZWI3LTQ3MTYtYmU0ZS0xNDJhZTg0MjBhY2YSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiIyLi6BhDIgYTlAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T21:18:13.548Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:18:13.548Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:13.548Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:13.549Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 [none]
[debug] [2024-12-02T21:18:13.896Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 200
[debug] [2024-12-02T21:18:13.896Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929 {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174245530-62850133d19cb-5da5eabe-192a7929","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:17:26.488063714Z","endTime":"2024-12-02T21:18:08.579433746Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733168680322637"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00001-hiq","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3b47d890-1eb7-4716-be4e-142ae8420acf?project=404015253336"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8zYjQ3ZDg5MC0xZWI3LTQ3MTYtYmU0ZS0xNDJhZTg0MjBhY2YSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiIyLi6BhDIgYTlAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf"},"done":true,"response":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"build":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-02T21:17:26.490391099Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents","createTime":"2024-12-02T19:44:41.046516345Z"}}
[debug] [2024-12-02T21:18:13.897Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy8zYjQ3ZDg5MC0xZWI3LTQ3MTYtYmU0ZS0xNDJhZTg0MjBhY2YSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiIyLi6BhDIgYTlAjIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[info] ✔  functions[monitorDeviceEvents(us-central1)] Successful update operation. 
[debug] [2024-12-02T21:18:13.902Z] Total Function Deployment time: 48511
[debug] [2024-12-02T21:18:13.903Z] 1 Functions Deployed
[debug] [2024-12-02T21:18:13.903Z] 0 Functions Errored
[debug] [2024-12-02T21:18:13.903Z] 0 Function Deployments Aborted
[debug] [2024-12-02T21:18:13.904Z] Average Function Deployment time: 48509
[info] i  functions: cleaning up build files... 
[debug] [2024-12-02T21:18:14.296Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.296Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.297Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.297Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.298Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events [none]
[debug] [2024-12-02T21:18:14.299Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:18:14.633Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events 404
[debug] [2024-12-02T21:18:14.634Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events {"error":{"code":404,"message":"Package \"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-12-02T21:18:14.836Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:18:14.837Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:18:14.837Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T21:18:14.839Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.839Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:14.839Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:18:14.971Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:18:14.971Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:18:14.972Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T21:18:15.074Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:15.074Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:18:15.074Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:18:15.201Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:18:15.202Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:18:15.202Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/smartshield-2936f/us/gcf 
[info] 
[info] ✔  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/smartshield-2936f/overview
[debug] [2024-12-02T21:26:12.633Z] ----------------------------------------------------------------------
[debug] [2024-12-02T21:26:12.636Z] Command:       /usr/local/nodejs/bin/node /usr/local/nodejs/bin/firebase deploy --only functions --debug
[debug] [2024-12-02T21:26:12.636Z] CLI Version:   13.27.0
[debug] [2024-12-02T21:26:12.636Z] Platform:      linux
[debug] [2024-12-02T21:26:12.636Z] Node Version:  v20.18.0
[debug] [2024-12-02T21:26:12.636Z] Time:          Mon Dec 02 2024 15:26:12 GMT-0600 (Central Standard Time)
[debug] [2024-12-02T21:26:12.636Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-12-02T21:26:12.710Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T21:26:12.711Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T21:26:12.712Z] [iam] checking project smartshield-2936f for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-12-02T21:26:12.713Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:12.713Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:12.714Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T21:26:12.714Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:12.715Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T21:26:13.018Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T21:26:13.018Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-12-02T21:26:13.019Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.019Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.020Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-12-02T21:26:13.020Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-12-02T21:26:13.290Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2024-12-02T21:26:13.290Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2024-12-02T21:26:13.292Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/smartshield-2936f/serviceAccounts/smartshield-2936f@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'smartshield-2936f'...
[info] 
[info] i  deploying functions 
[debug] [2024-12-02T21:26:13.302Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.303Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.303Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T21:26:13.409Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T21:26:13.410Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:13.411Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.412Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.412Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.412Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:13.413Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.413Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:13.414Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.414Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.414Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [none]
[debug] [2024-12-02T21:26:13.414Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:13.416Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [none]
[debug] [2024-12-02T21:26:13.416Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:13.417Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [none]
[debug] [2024-12-02T21:26:13.418Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:13.419Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [none]
[debug] [2024-12-02T21:26:13.419Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:13.796Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com 200
[debug] [2024-12-02T21:26:13.798Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-12-02T21:26:13.802Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com 200
[debug] [2024-12-02T21:26:13.802Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-12-02T21:26:13.806Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com 200
[debug] [2024-12-02T21:26:13.806Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-12-02T21:26:13.819Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com 200
[debug] [2024-12-02T21:26:13.820Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-12-02T21:26:13.820Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.820Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:13.821Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig [none]
[debug] [2024-12-02T21:26:14.258Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig 200
[debug] [2024-12-02T21:26:14.259Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/smartshield-2936f/adminSdkConfig {"projectId":"smartshield-2936f","databaseURL":"https://smartshield-2936f-default-rtdb.firebaseio.com","storageBucket":"smartshield-2936f.firebasestorage.app"}
[debug] [2024-12-02T21:26:14.260Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.261Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.262Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs [none]
[debug] [2024-12-02T21:26:14.593Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs 200
[debug] [2024-12-02T21:26:14.593Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs {"configs":[{"name":"projects/smartshield-2936f/configs/email"}]}
[debug] [2024-12-02T21:26:14.593Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.593Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.593Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables [none]
[debug] [2024-12-02T21:26:14.703Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables 200
[debug] [2024-12-02T21:26:14.703Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables {"variables":[{"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z"},{"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z"}]}
[debug] [2024-12-02T21:26:14.704Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.704Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.704Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.704Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:14.704Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass [none]
[debug] [2024-12-02T21:26:14.705Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user [none]
[debug] [2024-12-02T21:26:14.841Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass 200
[debug] [2024-12-02T21:26:14.841Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/pass {"name":"projects/smartshield-2936f/configs/email/variables/pass","updateTime":"2024-12-02T19:27:13.446185401Z","text":"Jarytwist2003008"}
[debug] [2024-12-02T21:26:14.951Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user 200
[debug] [2024-12-02T21:26:14.952Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/smartshield-2936f/configs/email/variables/user {"name":"projects/smartshield-2936f/configs/email/variables/user","updateTime":"2024-12-02T19:27:12.794527208Z","text":"jaroldgeordanno@gmail.com"}
[debug] [2024-12-02T21:26:14.957Z] Validating nodejs source
[debug] [2024-12-02T21:26:15.599Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.9.16"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-12-02T21:26:15.600Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-12-02T21:26:15.601Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-12-02T21:26:15.606Z] Found firebase-functions binary at '/home/jarytwist/Dev/smartshield/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8541

[debug] [2024-12-02T21:26:15.817Z] Got response from /__/functions.yaml {"endpoints":{"monitorDeviceEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/events/{eventId}"},"retry":false},"entryPoint":"monitorDeviceEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:19.847Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:19.847Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:19.847Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [none]
[debug] [2024-12-02T21:26:19.847Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:20.221Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com 200
[debug] [2024-12-02T21:26:20.221Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-12-02T21:26:20.222Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-12-02T21:26:20.222Z] > authorizing via signed-in user (jaroldgeordanno@gmail.com)
[debug] [2024-12-02T21:26:20.222Z] [iam] checking project smartshield-2936f for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-12-02T21:26:20.222Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:20.222Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:20.223Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions [none]
[debug] [2024-12-02T21:26:20.223Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:20.223Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T21:26:20.415Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions 200
[debug] [2024-12-02T21:26:20.416Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-12-02T21:26:20.417Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:20.418Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:20.419Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances pageSize=100&pageToken=
[debug] [2024-12-02T21:26:21.040Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances 200
[debug] [2024-12-02T21:26:21.040Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/smartshield-2936f/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /home/jarytwist/Dev/smartshield/functions (62.01 KB) for uploading 
[debug] [2024-12-02T21:26:21.096Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:21.096Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:21.097Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions [none]
[debug] [2024-12-02T21:26:21.754Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T21:26:21.754Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/smartshield-2936f/locations/-/functions {}
[debug] [2024-12-02T21:26:21.755Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:21.755Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:21.755Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-12-02T21:26:22.272Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions 200
[debug] [2024-12-02T21:26:22.273Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/-/functions {"functions":[{"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"build":"projects/404015253336/locations/us-central1/builds/3b47d890-1eb7-4716-be4e-142ae8420acf","runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-02T21:18:08.945878813Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"64d735dc17f7fb08ef5d9031967d833201ec3aaa"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents","createTime":"2024-12-02T19:44:41.046516345Z"}]}
[debug] [2024-12-02T21:26:22.282Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.282Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.283Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) [none]
[debug] [2024-12-02T21:26:22.547Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) 200
[debug] [2024-12-02T21:26:22.548Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/smartshield-2936f/databases/(default) {"name":"projects/smartshield-2936f/databases/(default)","uid":"80452cd1-a600-4c61-ad49-dff8c1e6bf31","createTime":"2024-11-28T03:52:37.511699Z","updateTime":"2024-11-28T03:52:37.511699Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-12-02T20:26:22.527691Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IPGL/JmDiooDMPmD3KjX/4kD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:22.552Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.553Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:22.553Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.554Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:22.555Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.555Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-12-02T21:26:22.556Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.556Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:22.557Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [none]
[debug] [2024-12-02T21:26:22.558Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:22.559Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [none]
[debug] [2024-12-02T21:26:22.559Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:22.567Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [none]
[debug] [2024-12-02T21:26:22.568Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:22.575Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [none]
[debug] [2024-12-02T21:26:22.575Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com x-goog-quota-user=projects/smartshield-2936f
[debug] [2024-12-02T21:26:23.102Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com 200
[debug] [2024-12-02T21:26:23.103Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2024-12-02T21:26:23.106Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com 200
[debug] [2024-12-02T21:26:23.106Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2024-12-02T21:26:23.111Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com 200
[debug] [2024-12-02T21:26:23.111Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-12-02T21:26:23.114Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com 200
[debug] [2024-12-02T21:26:23.114Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/smartshield-2936f/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2024-12-02T21:26:23.116Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.116Z] Checked if tokens are valid: true, expires at: 1733177831967
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-12-02T21:26:23.117Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.117Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.118Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T21:26:23.119Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-12-02T21:26:23.349Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T21:26:23.349Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"112176926320788103320"}}
[debug] [2024-12-02T21:26:23.439Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-12-02T21:26:23.439Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/404015253336/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-404015253336@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105126537426549179795"}}
[debug] [2024-12-02T21:26:23.441Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.441Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.441Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f [none]
[debug] [2024-12-02T21:26:23.553Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f 200
[debug] [2024-12-02T21:26:23.554Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/smartshield-2936f {"projectNumber":"404015253336","projectId":"smartshield-2936f","lifecycleState":"ACTIVE","name":"smartshield","labels":{"firebase":"enabled"},"createTime":"2024-11-28T03:48:31.787378Z"}
[debug] [2024-12-02T21:26:23.555Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.555Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.555Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo [none]
[debug] [2024-12-02T21:26:23.853Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo 200
[debug] [2024-12-02T21:26:23.853Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/smartshield-2936f/billingInfo {"name":"projects/smartshield-2936f/billingInfo","projectId":"smartshield-2936f","billingAccountName":"billingAccounts/014CC7-094C4D-7E54A9","billingEnabled":true}
[debug] [2024-12-02T21:26:23.858Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.858Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:23.859Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-12-02T21:26:24.157Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-12-02T21:26:24.158Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip?GoogleAccessId=service-404015253336@gcf-admin-robot.iam.gserviceaccount.com&Expires=1733176584&Signature=jk0tjEBOWGTB%2FBLtdNB60sHpl90LDlhEb8fedqfy%2F9fOVXLH14Zgs2RnwqNPANPFGwYciJEinzVvXc3MMaeswkgZlvckGAnhIkPEa5sD5mRQckond%2BDgvhyYbhRnEgktl%2BP8KrsfoA5DJXUPkTxYw9pP7BFEakEeZPHrEg47CJS37MDqD8apNzWZeDJk60HdeocCEdspP%2BU9Wo7Pae7ADKJnRb3RdaTMqj2PTa5XXRLZzEENgDZ2F6Y8%2FJ4%2Fw7zkqI%2B8yPzLooz%2FCtgsWR%2F4IXrIAMAkd9AS8Rfr11jkA6KbEApYXo2w3EFrf9NHJ0aOZ879BlX62znFgLXNC0R1Gg%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip"}}
[debug] [2024-12-02T21:26:24.163Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip GoogleAccessId=service-404015253336%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1733176584&Signature=jk0tjEBOWGTB%2FBLtdNB60sHpl90LDlhEb8fedqfy%2F9fOVXLH14Zgs2RnwqNPANPFGwYciJEinzVvXc3MMaeswkgZlvckGAnhIkPEa5sD5mRQckond%2BDgvhyYbhRnEgktl%2BP8KrsfoA5DJXUPkTxYw9pP7BFEakEeZPHrEg47CJS37MDqD8apNzWZeDJk60HdeocCEdspP%2BU9Wo7Pae7ADKJnRb3RdaTMqj2PTa5XXRLZzEENgDZ2F6Y8%2FJ4%2Fw7zkqI%2B8yPzLooz%2FCtgsWR%2F4IXrIAMAkd9AS8Rfr11jkA6KbEApYXo2w3EFrf9NHJ0aOZ879BlX62znFgLXNC0R1Gg%3D%3D
[debug] [2024-12-02T21:26:24.164Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip [stream]
[debug] [2024-12-02T21:26:24.730Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip 200
[debug] [2024-12-02T21:26:24.731Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com/b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function monitorDeviceEvents(us-central1)... 
[debug] [2024-12-02T21:26:24.749Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:24.749Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:24.750Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2024-12-02T21:26:24.750Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents {"name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-404015253336.us-central1.cloudfunctions.appspot.com","object":"b29a2b07-c1b0-47b7-9bc9-4b7ba4929756.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-12-02T21:26:26.101Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents 200
[debug] [2024-12-02T21:26:26.101Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T21:26:26.104Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:26.104Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:26.105Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:26.269Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:26.270Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2024-12-02T21:26:26.773Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:26.773Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:26.773Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:26.774Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:26.922Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:26.923Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:26:27.925Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:27.926Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:27.926Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:27.927Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:28.082Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:28.082Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:26:30.090Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:30.091Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:30.091Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:30.092Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:30.181Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:30.182Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:26:34.187Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:34.188Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:34.188Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:34.188Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:34.298Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:34.298Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:26:42.314Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:42.315Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:42.315Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:42.315Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:42.654Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:42.655Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:26:52.679Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:26:52.680Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:52.680Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:26:52.681Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:26:52.927Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:26:52.927Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:27:02.952Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:27:02.952Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:02.953Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:02.953Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:27:03.221Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:27:03.222Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:27:13.247Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:27:13.249Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:13.249Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:13.250Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:27:13.572Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:27:13.572Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9jYjM4ZDJjNS04NmU3LTQ4OWItYjc1Ny1hMzFkMjZhODAxY2MSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiozLi6BhD48aOKATIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":false}
[debug] [2024-12-02T21:27:13.572Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9jYjM4ZDJjNS04NmU3LTQ4OWItYjc1Ny1hMzFkMjZhODAxY2MSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiozLi6BhD48aOKATIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2024-12-02T21:27:23.590Z] [update-default-us-central1-monitorDeviceEvents] Retrying task index 0
[debug] [2024-12-02T21:27:23.591Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:23.591Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:23.591Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced [none]
[debug] [2024-12-02T21:27:23.857Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced 200
[debug] [2024-12-02T21:27:23.858Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced {"name":"projects/smartshield-2936f/locations/us-central1/operations/operation-1733174784888-6285033630db6-f414dcf2-7c21aced","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2024-12-02T21:26:26.068651573Z","endTime":"2024-12-02T21:27:14.518135605Z","target":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174246410457"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00002-dep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents"},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/cb38d2c5-86e7-489b-b757-a31d26a801cc?project=404015253336"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"COMPLETE","resource":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/monitordeviceevents?project=smartshield-2936f","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9jYjM4ZDJjNS04NmU3LTQ4OWItYjc1Ny1hMzFkMjZhODAxY2MSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiozLi6BhD48aOKATIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc"},"done":true,"response":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/smartshield-2936f/locations/us-central1/functions/monitorDeviceEvents","buildConfig":{"build":"projects/404015253336/locations/us-central1/builds/cb38d2c5-86e7-489b-b757-a31d26a801cc","runtime":"nodejs18","entryPoint":"monitorDeviceEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-404015253336-us-central1","object":"monitorDeviceEvents/function-source.zip","generation":"1733174785885818"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/smartshield-2936f/serviceAccounts/404015253336-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/smartshield-2936f/locations/us-central1/services/monitordeviceevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"smartshield-2936f\",\"databaseURL\":\"https://smartshield-2936f-default-rtdb.firebaseio.com\",\"storageBucket\":\"smartshield-2936f.firebasestorage.app\"}","GCLOUD_PROJECT":"smartshield-2936f","EVENTARC_CLOUD_EVENT_SOURCE":"projects/smartshield-2936f/locations/us-central1/services/monitorDeviceEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"monitorDeviceEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://monitordeviceevents-suvc4mwfca-uc.a.run.app","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"monitordeviceevents-00003-gew","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/smartshield-2936f/locations/nam5/triggers/monitordeviceevents-753335","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/events/{eventId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/smartshield-2936f/topics/eventarc-nam5-monitordeviceevents-753335-107","serviceAccountEmail":"404015253336-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-02T21:26:26.070452683Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9d844ccf98904d70023a32a89dbbc3af18e6f2bf"},"environment":"GEN_2","url":"https://us-central1-smartshield-2936f.cloudfunctions.net/monitorDeviceEvents","createTime":"2024-12-02T19:44:41.046516345Z"}}
[debug] [2024-12-02T21:27:23.858Z] Got source token Cldwcm9qZWN0cy80MDQwMTUyNTMzMzYvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9jYjM4ZDJjNS04NmU3LTQ4OWItYjc1Ny1hMzFkMjZhODAxY2MSfHVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NtYXJ0c2hpZWxkLTI5MzZmL2djZi1hcnRpZmFjdHMvc21hcnRzaGllbGQtLTI5MzZmX191cy0tY2VudHJhbDFfX21vbml0b3JfZGV2aWNlX2V2ZW50czp2ZXJzaW9uXzEY2I6+ieELIk5wcm9qZWN0cy9zbWFydHNoaWVsZC0yOTM2Zi9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL21vbml0b3JEZXZpY2VFdmVudHMqDAiozLi6BhD48aOKATIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[info] ✔  functions[monitorDeviceEvents(us-central1)] Successful update operation. 
[debug] [2024-12-02T21:27:23.880Z] Total Function Deployment time: 59120
[debug] [2024-12-02T21:27:23.880Z] 1 Functions Deployed
[debug] [2024-12-02T21:27:23.880Z] 0 Functions Errored
[debug] [2024-12-02T21:27:23.881Z] 0 Function Deployments Aborted
[debug] [2024-12-02T21:27:23.881Z] Average Function Deployment time: 59117
[info] i  functions: cleaning up build files... 
[debug] [2024-12-02T21:27:24.274Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.274Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.277Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.277Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.278Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events [none]
[debug] [2024-12-02T21:27:24.281Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:27:24.615Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:27:24.616Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:27:24.617Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T21:27:24.620Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.620Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.621Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:27:24.740Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:27:24.740Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:27:24.741Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2024-12-02T21:27:24.804Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events 404
[debug] [2024-12-02T21:27:24.805Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events {"error":{"code":404,"message":"Package \"projects/smartshield-2936f/locations/us-central1/repositories/gcf-artifacts/packages/monitor_device_events\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-12-02T21:27:24.843Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.844Z] Checked if tokens are valid: true, expires at: 1733177831967
[debug] [2024-12-02T21:27:24.844Z] >>> [apiv2][query] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list [none]
[debug] [2024-12-02T21:27:24.965Z] <<< [apiv2][status] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list 404
[debug] [2024-12-02T21:27:24.966Z] <<< [apiv2][body] GET https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-12-02T21:27:24.967Z] Failed docker command with error  Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/smartshield-2936f/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/smartshield-2936f/us/gcf 
[info] 
[info] ✔  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/smartshield-2936f/overview
